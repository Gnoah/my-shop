{"ast":null,"code":"import _defineProperty from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/root/Bureau/my-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/root/Bureau/my-shop/src/components/Ajout.jsx\";\nimport React, { Component } from 'react';\nimport { MDBRow, MDBCol } from \"mdbreact\";\nimport { storage } from '../Firebase/index';\nimport './Ajout.css';\n\nvar Ajout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Ajout, _Component);\n\n  function Ajout(props) {\n    var _this;\n\n    _classCallCheck(this, Ajout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Ajout).call(this, props));\n\n    _this.handlerChange = function (e) {\n      if (e.target.files[0]) {\n        var image = _this.target.files[0];\n\n        _this.setState(function () {\n          return {\n            image: image\n          };\n        });\n      }\n    };\n\n    _this.handlerUpload = function () {\n      var image = _this.state.image;\n      var uploadTask = storage.ref('images/${image.name}').put(image);\n      uploadTask.on('state_changed', function (snapshot) {\n        var progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n\n        _this.setState({\n          progress: progress\n        });\n      }, function (error) {\n        console.log(error);\n      }, function () {\n        storage.ref('image').child(image.name).getDownloadURL().then(function (url) {\n          console.log(url);\n\n          _this.setState({\n            url: url\n          });\n        });\n      });\n    };\n\n    _this.state = {\n      image: null,\n      url: '',\n      progress: 0\n    };\n    _this.handlerChange = _this.handlerChange.bind(_assertThisInitialized(_this));\n    _this.handleUpload = _this.handleUpload.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Ajout, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var Ajout = function Ajout(props) {\n        var initialFormState = {\n          id: null,\n          nom: '',\n          prix: '',\n          desc: '',\n          fich: ''\n        };\n\n        var _useState = useState(initialFormState),\n            _useState2 = _slicedToArray(_useState, 2),\n            product = _useState2[0],\n            setProduct = _useState2[1];\n\n        var handleInputChange = function handleInputChange(event) {\n          var _event$target = event.target,\n              name = _event$target.name,\n              value = _event$target.value;\n          setProduct(_objectSpread({}, product, _defineProperty({}, name, value)));\n        };\n\n        return React.createElement(\"form\", {\n          onSubmit: function onSubmit(event) {\n            event.preventDefault();\n            if (!product.nom || !product.prix || !product.desc || !product.fich) return;\n\n            if (isNaN(product.prix)) {\n              document.getElementById(\"erreur\").innerHTML = \"Entrer un nombre\";\n            } else {\n              document.getElementById(\"erreur\").innerHTML = \"\";\n              props.addProduct(product);\n              props.setCount(props.count + 1);\n              setProduct(initialFormState);\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(MDBRow, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(MDBCol, {\n          md: \"3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, \" \"), React.createElement(MDBCol, {\n          md: \"6\",\n          style: {\n            border: \"1px solid black\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \"Produit\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, \" \", React.createElement(\"input\", {\n          type: \"text\",\n          name: \"nom\",\n          value: product.nom,\n          onChange: handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }), \" \")), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"Prix\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \" \", React.createElement(\"input\", {\n          type: \"text\",\n          name: \"prix\",\n          value: product.prix,\n          onChange: handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          id: \"erreur\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }), \" \")), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, \"Description\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"textarea\", {\n          name: \"desc\",\n          rows: \"5\",\n          value: product.desc,\n          onChange: handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }))), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          id: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, \" File\", React.createElement(\"input\", {\n          type: \"file\",\n          name: \"fich\",\n          value: product.fich,\n          onChange: _this2.handlerChange,\n          accept: \".png, .jpg, .jpeg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        })))))), React.createElement(\"button\", {\n          id: \"bout\",\n          onClick: _this2.handleUpload,\n          className: \"btn btn-primary btn-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"A\", React.createElement(\"span\", {\n          id: \"tex\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"jouter\"))), React.createElement(MDBCol, {\n          md: \"3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \" \")));\n      };\n    }\n  }]);\n\n  return Ajout;\n}(Component);\n\nexport default Ajout;","map":{"version":3,"sources":["/root/Bureau/my-shop/src/components/Ajout.jsx"],"names":["React","Component","MDBRow","MDBCol","storage","Ajout","props","handlerChange","e","target","files","image","setState","handlerUpload","state","uploadTask","ref","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","console","log","child","name","getDownloadURL","then","url","bind","handleUpload","initialFormState","id","nom","prix","desc","fich","useState","product","setProduct","handleInputChange","event","value","preventDefault","isNaN","document","getElementById","innerHTML","addProduct","setCount","count","border"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { MDBRow, MDBCol } from \"mdbreact\";\nimport { storage } from '../Firebase/index'\nimport './Ajout.css'\n\n\nclass Ajout extends Component {\n    constructor(props){\n        super(props);\n        this.state ={\n            image: null,\n            url: '',\n            progress: 0\n        }\n        this.handlerChange = this.handlerChange.bind(this);\n        this.handleUpload = this.handleUpload.bind(this);\n    }\n\n    handlerChange = e => {\n        if( e.target.files [0] ) {\n            const image = this.target.files[0];\n            this.setState(() => ({image}));\n        }\n    }\n\n    handlerUpload = () => {\n        const {image} = this.state;\n        const uploadTask = storage.ref('images/${image.name}').put(image);\n        uploadTask.on('state_changed',\n        (snapshot) => { \n            const progress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes)* 100);\n            this.setState({progress});  \n        },\n        (error) => {\n            console.log(error)\n        },\n        () => {\n            storage.ref('image').child(image.name).getDownloadURL().then( url => {\n                console.log(url);\n                this.setState({url});                \n            })\n        });\n    }\n\n\nrender () {  \n    var Ajout = props => {  \n\tconst initialFormState = { id: null, nom: '', prix: '', desc: '', fich: '' }\n\tconst [ product, setProduct ] = useState(initialFormState)\n\n\tconst handleInputChange = event => {\n\t\tconst { name, value } = event.target\n\t\tsetProduct({ ...product, [name]: value })\n\t}\n\n\treturn (\n            <form \n                onSubmit={event => {\n                    event.preventDefault()\n                    \n                    if (!product.nom || !product.prix || !product.desc || !product.fich) return\n                        if (isNaN(product.prix)){\n                            document.getElementById(\"erreur\").innerHTML=\"Entrer un nombre\"\n                        }else{\n                            document.getElementById(\"erreur\").innerHTML=\"\"\n                            props.addProduct(product)\n                            props.setCount(props.count +1)\n                            setProduct(initialFormState)\n                        }\t\t\t\t\n                }}\n            >\n                <MDBRow>\n                    <MDBCol md=\"3\"> </MDBCol>\n                    <MDBCol md=\"6\" style={{ border: \"1px solid black\"}}>\n                        \n                        <table>\n                            <tbody>\n                            <tr>\n                                <td>Produit</td>\n                                <td> <input type=\"text\" name=\"nom\" value={product.nom} onChange={handleInputChange}/> </td>\n                            </tr>\n                            <tr>\n                                <td>Prix</td>\n                                <td> <input type=\"text\" name=\"prix\" value={product.prix} onChange={handleInputChange}/><span id=\"erreur\"/> </td>\n                            </tr>\n                            <tr>\n                                <td >Description</td>\n                                <td><textarea name=\"desc\" rows=\"5\" value={product.desc} onChange={handleInputChange}></textarea></td>\n                            </tr>\n                            <tr>\n                                <td></td>\n                                \n                                <td><label id=\"\"> File<input type=\"file\" name=\"fich\" value={product.fich} onChange={this.handlerChange} accept=\".png, .jpg, .jpeg\"/></label></td>\n                            </tr>  \n                            </tbody>                         \n                        </table><button id=\"bout\" onClick={this.handleUpload} className=\"btn btn-primary btn-block\">A<span id=\"tex\">jouter</span></button>\n                    </MDBCol>\n                    <MDBCol md=\"3\"> </MDBCol>\n                </MDBRow>\n            </form>\n    )\n            }\n}\n}\n\nexport default Ajout"]},"metadata":{},"sourceType":"module"}